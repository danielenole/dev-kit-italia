import { Meta, Story, Canvas, Controls, Description, Subtitle } from '@storybook/addon-docs/blocks';
import * as CollapseStories from './it-collapse.stories';

<Meta of={CollapseStories} />

# Collapse

<description>Funzionalità applicabile a elementi di interfaccia per espandere o comprimere sezioni di contenuto e ottimizzare spazio.</description>

## Cosa fa

Il componente Collapse (`it-collapse`) è un elemento richiudibile che ottimizza l’ingombro dei contenuti di una pagina. 

Su questo componente si basa anche il [componente Accordion](?path=/docs/componenti-accordion--documentazione), usando i collapse in gruppo e permettendo di attivarli indipendentemente l’uno dall’altro oppure in modo esclusivo con l’attivazione di solo un blocco alla volta.

[Approfondisci quando e come usare il componente Collapse](https://designers.italia.it/design-system/componenti/collapse/)

### Alternative a questo componente

- [Accordion](?path=/docs/componenti-accordion--documentazione): gruppo di collapse che possono essere attivati indipendentemente l'uno dall'altro oppure in modo esclusivo con l'attivazione di un solo blocco alla volta.

- Tabs: mostrano i contenuti senza spingere altre sezioni verso il fondo della pagina e sono utili quando l'utente deve passare velocemente da una sezone all'altra.

## Anteprima e attributi del componente

Modifica gli attributi nella tabella per personalizzare in tempo reale l'aspetto e il comportamento del componente. Per vedere come cambia il codice, clicca su **Show code**.

<Canvas of={CollapseStories.EsempioInterattivo} />
<Controls of={CollapseStories.EsempioInterattivo} />

## Informazioni generali

Il componente `it-collapse` utilizza diversi slot per definire il trigger, il testo mostrato nel trigger e il contenuto richiudibile:

- `slot="trigger"`, per inserire un elemento personalizzato da utilizzare come trigger per aprire/chiudere il collapse (**opzionale**);
- `slot="label"`, per inserire il testo da mostrare nel trigger di default (**obbligatorio**, anche nel caso di [trigger personalizzato](#trigger-personalizzato));
- `slot="content"`, per inserire il contenuto da mostrare o nascondere nello slot `content` del componente (**obbligatorio**).

Il componente può essere utilizzato in due modalità:

- **con trigger di default**, inserendo un elemento nello slot `label` per definire il testo del pulsante;
- ** contrigger personalizzato**; inserendo un elemento nello slot `trigger`.

L'attributo `as` permette di impostare il tag del trigger di default:

- default `button`, il componente renderizza un `<button>` con id e attributi ARIA (`aria-expanded`, `aria-controls`);
- altri tag validi (ad esempio, `a`, `p`, `div`, `span`), il componente renderizza il tag scelto (ad esempio `<a>`) e imposta automaticamente `role="button"`, `tabindex="0"`, id univoco e attributi ARIA.

  Assicurati di utilizzare [tag HTML compatibili con il ruolo button](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Roles/button_role).

<Canvas of={CollapseStories.Comportamento} />

## Accessibilità

Il collapse implementa le specifiche ARIA [WAI-ARIA Authoring Practices 1.1 disclosure pattern](https://www.w3.org/WAI/ARIA/apg/patterns/disclosure/) per garantire un'esperienza accessibile a tutti gli utenti:

- supporto per `Space` e `Enter` per attivare/disattivare elementi;
- attributi ARIA appropriati per comunicare lo stato agli screen reader;
- rispetto delle preferenze di riduzione del movimento definite dall'utente per le animazioni di apertura/chiusura.

## Stato iniziale aperto

Usa l'attributo `default-open` per rendere il collapse inizialmente aperto al caricamento della pagina.

<Canvas of={CollapseStories.Aperto} />

## Tag del trigger di default

Come descritto nelle [informazioni generali](#informazioni-generali), puoi assegnare al trigger diversi tag validi per il [ruolo button](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Reference/Roles/button_role), valorizzando adeguatamente l'attributo `as`.

Ad esempio, per ottenere un link (`<a>`) come trigger del collapse, valorizza l'attributo `as` con il valore `a`.

<div class="callout callout-info">
<div class="callout-inner">
<div class="callout-title"><span class="text">Nota</span></div>
<p>In questo esempio non viene valorizzato l'attributo `variant`, per mostrare come il componente assegna al trigger la variante di default, `primary`, e rende il trigger visivamente analogo alla variante primaria del componente Button.</p>
<p>
Per informazioni su come modificare l'aspetto del trigger attraverso gli attributi del componente, [consulta la sezione Varianti del trigger](#varianti-del-trigger).

Se hai necessità di personalizzare ulteriormente l'aspetto del trigger di default, [consulta la sezione Personalizzazione degli stili](#personalizzazione-degli-stili).

Se hai bisogno di un trigger ad hoc per il tuo caso d'uso, valuta l'utilizzo di un [trigger personalizzato](#trigger-personalizzato).
</p>
</div>
</div>

<Canvas of={CollapseStories.LinkCollapse} />

## Varianti del trigger

- Usa l'attributo `variant` per applicare le varianti Bootstrap Italia ai trigger di Collapse.

- Usa l'attributo `size` per applicare le dimensioni Bootstrap Italia ai trigger di Collapse.

- Usa l'attributo `outline` per applicare le varianti outline Bootstrap Italia ai trigger di Collapse.

<div class="callout callout-warning">
<div class="callout-inner">
<div class="callout-title"><span class="text">Attenzione</span></div>
<p>
Sono attualmente supportati solo gli stili Bootstrap Italia relativi ai pulsanti, in quanto il trigger è semanticamente un pulsante e come tale deve essere reso, coerente col resto del Design Kit.
</p>
<p>
Consulta le sezioni dedicate ai [trigger personalizzati](#trigger-personalizzato) e alla [personalizzazione degli stili](#personalizzazione-degli-stili) per esplorare le altre possibilità fornite dal Kit.
</p>
</div>
</div>

<Canvas of={CollapseStories.TriggerClassi} />

## Trigger personalizzato

Puoi usare un trigger personalizzato inserendo un elemento nello slot `trigger`. Questo elemento diventa il controllo per aprire e chiudere il collapse.

Ricordati di inserire il testo del trigger nello slot `label`.

<Canvas of={CollapseStories.TriggerPersonalizzato} />

## Personalizzazione degli stili

Per personalizzare gli stili, puoi possono usare i selettori `::part` dedicati:
- `::part(trigger)`, per l'elemento trigger;
- `::part(content)`, per l'elemento contenitore del corpo richiudibile.

[Vai alla guida sui selettori part](/docs/personalizzazione-degli-stili--documentazione#selettore-part).
