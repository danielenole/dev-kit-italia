import { Meta, Story, Canvas, Controls, Description, Subtitle, Title } from '@storybook/addon-docs/blocks';
import * as Stories from './it-video.stories';

<Meta of={Stories} />


# Video player

<description>Lettore per mostrare video sul proprio sito o incorporarli da piattaforme terze rispettando privacy e accessibilità.</description>

## Cosa fa
Il componente `it-video` consente di incorporare video all’interno delle pagine web, offrendo un lettore video accessibile e rispettoso della privacy degli utenti.
Supporta sia la riproduzione di video ospitati localmente che l’incorporamento di video da piattaforme esterne come YouTube, garantendo un’esperienza utente coerente e personalizzabile.

Questo componente utilizza la libreria [Video.js](https://videojs.com/) per implementare funzionalità avanzate come il supporto a diversi formati video, la personalizzazione dell’interfaccia utente e l’integrazione con API esterne.

[Approfondisci come e quando usare il componente Video player](https://designers.italia.it/design-system/componenti/video-player/)

## Anteprima e attributi del componente
Modifica gli attributi nella tabella per personalizzare in tempo reale l'aspetto e il comportamento del componente. Per vedere come cambia il codice, clicca su **Show code**.
<Canvas of={Stories.EsempioInterattivo} />
<Controls of={Stories.EsempioInterattivo} />

## Indicazioni generali
- Per aggiungere un video, usa il componente `<it-video />` e i relativi attributi per gestirne la sorgente e le opzioni del video player. 
- Usa l'attributo `options` personalizzare il comportamento, l’aspetto e le funzionalità del player usando le [opzioni di Video.js](https://videojs.com/guides/options/).
- Usa l'attributo `translations` per definire le traduzioni del player diverse dalla lingua italiana o per sovrascrivere le traduzioni italiane preimpostate.

### Font per le icone del player
Per utilizzare le icone del player, devi includere il font `VideoJS.woff` nella tua applicazione. Puoi farlo aggiungendo il CSS compilato di dev-kit-italia nel tuo sorgente HTML:

```html
<link rel="stylesheet" href="dev-kit-italia/dist/styles.css" />
```
Oppure, se stai usando SCSS, puoi definire il font direttamente nel tuo file SCSS, copiando l'asset `VideoJS.woff` nella tua cartella assets/fonts dal package dev-kit-italia:

```scss
@font-face {
  font-family: VideoJS;
  src: url('./assets/fonts/VideoJS.woff') format('woff');
  font-weight: normal;
  font-style: normal;
}
```



### Plug-in per Video.js
Esistono numerosi plug-in disponibili per Video.js che consentono di aggiungere nuove funzionalità, come la riproduzione di video in VR, l’analisi delle statistiche di visualizzazione del video, le utility per la UI mobile e molto altro ancora.

<Description> (Ad esempio il plugin per l'embed di Vimeo)</Description>
Se vuoi usare plug-in, includi il nome della funzione di inizializzazione dei plug-in nel componente `<it-video>` con l'attributo  `init-plugins`. La funzione deve essere definita nella window. 

Esempio:

```html
<it-video ...... init-plugins="myInitPlugin"></it-video>
<script> const myInitPlugin = (videojs)=>{ /*my code*/ }</script>
```

## Accessibilità

I comandi del video player sono agevolmente accessibili alle persone che usano tecnologie assistive. Tuttavia, per rendere accessibile un contenuto video, assicurati di soddisfare i criteri di successo delle [linee guida 1.2 Media temporizzati delle WCAG (versione corrente)](https://www.w3.org/Translations/WCAG21-it/#time-based-media).

In particolare:
- fornisci sempre sottotitoli (Criterio di successo 1.2.2);
- fornisci una trascrizione se il contenuto è solo video oppure solo audio (Criterio di successo 1.2.1);
- fornisci audio descrizioni quando sono presenti scene o contenuti non descritti dalla traccia audio primaria (Criteri di successo 1.2.3 e 1.2.5).


## Con trascrizione
Per aggiungere una trascrizione al video, usa il componente `<it-accordion>` come elemento figlio del componente `<it-video>`. All'interno dell'accordion, puoi inserire il testo della trascrizione del video.

Vai alla [documentazione di `<it-accordion>`](?path=/docs/componenti-accordion--documentazione) per maggiori dettagli su come utilizzarlo.
<Canvas of={Stories.ConTrascrizione} />

## Sottotitoli, didascalie, capitoli e descrizioni

Tramite l’attributo `track` puoi aggiungere il testo per sottotitoli, didascalie, capitoli o descrizioni audio definito in un file testuale in formato WebVTT.

L'attributo `track` accetta un elenco di valori con il seguente formato, dove ogni singolo elemento rappresenta un file di sottotitoli, didascalie, capitoli o descrizioni:

```js
[{kind:'captions', src:'https://example.com/captions.vtt', srclang:'it', label:'Italiano', default:true}, ...]
```

In base al contenuto del file, valorizza opportunamente la proprietà `kind` con:
- `captions`, per i sottotitoli (trascrizione dei dialoghi);
- `subtitles`, per le didascalie (trascrizione dei dialoghi, degli effetti sonori, trascrizione del tipo di emozioni rappresentate dalla musica, ecc.);
- `chapters`, per i capitoli;
- `descriptions`, per le descrizioni audio (testo che descrive il contenuto visivo del video, utile per le persone con disabilità visive);
- `metadata`, per i metadati (informazioni aggiuntive sul video, come la durata, la risoluzione, ecc.).

L'attributo `default` indica se il file associato è quello predefinito da utilizzare quando il video viene caricato.

Per approfondire, [vai alla documentazione di VideoJS (Inglese)](https://videojs.com/guides/text-tracks/).

Di seguito un esempio d’uso delle didascalie (kind:"captions") in diverse lingue:

<Canvas of={Stories.SottotitoliDidascalieCapitoliEDescrizioni} />

## Immagine di anteprima

<Description of={Stories.ImmagineDiAnteprima} />
<Canvas of={Stories.ImmagineDiAnteprima} />

## Streaming
<Description of={Stories.Streaming} />
<Canvas of={Stories.Streaming} />

## Gestire più tracce audio
<Description of={Stories.GestirePiuTracceAudio} />
<Canvas of={Stories.GestirePiuTracceAudio} />

## Embed da piattaforme terze
<Description of={Stories.EmbedDaPiattaformeTerze} />
<Canvas of={Stories.EmbedDaPiattaformeTerze} />

## i18n
<Description of={Stories.I18n} />
