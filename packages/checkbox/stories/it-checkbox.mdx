import { Meta, Story, Canvas, Controls, Description, Subtitle, Title } from '@storybook/addon-docs/blocks';
import * as Stories from './it-checkbox.stories';

<Meta of={Stories} />

# Checkbox

<description>Casella di controllo accessibile e responsiva, che consente all'utente di attivare o disattivare un'opzione.</description>

## Cosa fa
Il componente checkbox consente all’utente di selezionare o deselezionare una o più opzioni da un elenco di scelte predefinite.

[Approfondisci come e quando usare il componente Checkbox](https://designers.italia.it/design-system/componenti/checkbox/)

## Anteprima e attributi del componente
Modifica gli attributi nella tabella per personalizzare in tempo reale l'aspetto e il comportamento del componente. Per vedere come cambia il codice, clicca su **Show code**.

<Canvas of={Stories.EsempioInterattivo} />
<Controls of={Stories.EsempioInterattivo} />

## Accessibilità
Tutti gli attributi `it-aria-*` passati a `<it-checkbox>` vengono applicati all'input generato.

## Stato disabilitato
Per disabilitare una checkbox, aggiungi l'attributo `disabled` al componente `<it-checkbox>`.
<Canvas of={Stories.Disabilitato} />

## Stato indeterminato (mixed)
Per ottenere lo stato indeterminato di una checkbox, aggiungi l'attributo `indeterminate` al componente `<it-checkbox>`.
<Canvas of={Stories.Indeterminate} />

## Gruppo di checkbox
Per creare un gruppo di checkbox, racchiudi tutti gli elementi `<it-checkbox>` all'interno del componente `<it-checkbox-group>` e assegna al gruppo l'attributo `name` corrispondente al nome del campo da salvare nella form.

Sul componente `<it-checkbox-group>` sono disponibili alcuni attributi che si riflettono automaticamente sugli `<it-checkbox>` figli, e che non è necessario replicare in ognuno di essi. Questi attributi sono:
- `name`: indica il nome del campo nella form in cui verranno salvati i valori selezionati nel gruppo di checkbox
- `required`: rende obbligatorio il campo della form relativo al gruppo di checkbox
- `disabled`: disabilita tutte le checkbox del gruppo di checkbox
- `group`: applica lo stile *gruppo di checkbox*. È lo stile di default per il gruppo di checkbox
- `inline`: applica lo stile *inline* al gruppo di checkbox.

Inserisci l'etichetta del gruppo in un elemento con attributo `slot="legend"` all'interno di `<it-checkbox-group>`.

Quando utilizzi il componente `it-checkbox-group` in una form, il modo corretto per estrarre il valore del campo al submit via JS è:

```js
const formData = new FormData(document.getElementById('form'));
formData.getAll(field_name) // dove `field_name` è il valore dell'attributo `[name]`
```

### Allineati in colonna
È lo stile di default del gruppo di checkbox, ed equivale ad impostare l'attributo `group` su `<it-checkbox-group>`.

L’elemento grafico di spunta verrà allineato alla destra del contenuto testuale.


<Canvas of={Stories.Group} />

### Inline
Per allineare orizzontalmente le checkbox, aggiungi l'attributo `inline` a `<it-checkbox-group>`.
<Canvas of={Stories.Inline} />

### Valore di default del gruppo
Per impostare un valore di default al gruppo di checkbox, usa l'attributo `value` impostando una rappresentazione in stringa di un array, ad esempio:
`value='["valore_1","valore_3"]'`.
<Canvas of={Stories.GroupInitValue} />

## Testo di supporto
Per mostrare un testo di supporto alla checkbox, aggiungi l'attributo `supportText="Testo di supporto"` a `<it-checkbox>`.
<Canvas of={Stories.SupportText} />

## Validazione e gestione degli errori
Questa sezione si riferisce sia al componente `<it-checkbox>` che al componente `<it-checkbox-group>`.


Se non hai impostato la validazione custom tramite l'attributo `custom-validation`, e hai impostato l'attributo `required`, viene effettuata una validazione interna utilizzando la validazione nativa del browser.

<Canvas of={Stories.ValidazioneNativa} />

### Personalizzazione dei messaggi di errore

Puoi personalizzare alcuni dei messaggi di errore di validazione, traducendo le seguenti stringhe tramite l'[utility di internazionalizzazione](/docs/i18n-internazionalizzazione--documentazione):

- `validityRequired`: messaggio che viene mostrato quando `<it-checkbox>` ha l'attributo `required` e non è compilato
- `validityGroupRequired`: messaggio che viene mostrato quando il gruppo di checkbox è `required` e non è compilato

Per gli altri errori di validazione non indicati, verranno mostrati i messaggi di errore nativi del browser.

### Validazione esterna (validazione custom)

Puoi anche validare il campo esternamente (via js ad esempio, o lato server), impostando l'attributo `custom-validation="true"`.
In questo modo la validazione di default del browser effettuata internamente al componente è disabilitata.


#### Campo invalido

Nel caso il campo non sia valido, devi invalidare il campo impostando il messaggio di errore da visualizzare attraverso l'attributo `validity-message="Messaggio di errore"`.

#### Campo valido

Per riportare il campo ad uno stato 'valido', è sufficiente impostare il messaggio di errore a vuoto: `validity-message=""`.

<Canvas of={Stories.ValidazioneCustom} />

## Gestione degli eventi

<Description of={Stories.GestioneEventi} />
<Canvas of={Stories.GestioneEventi} />


## {Stories.MetodiEPropPubblici.name}
<Description of={Stories.MetodiEPropPubblici} />
<Canvas of={Stories.MetodiEPropPubblici} />
