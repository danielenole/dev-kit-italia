@import 'bootstrap-italia/src/scss/base/functions';
@import 'bootstrap-italia/src/scss/base/variables';

@import 'bootstrap-italia/src/scss/base/mixins';
@import 'bootstrap-italia/src/scss/base/maps';
@import 'bootstrap-italia/src/scss/base/utilities';

// Utilities necessarie per il modal
$utilities: (
  'display': map-merge(
      map-get($utilities, 'display'),
      (
        'values': (
          none: none,
          block: block,
          flex: flex,
        ),
      )
    ),
  'overflow': map-merge(
      map-get($utilities, 'overflow'),
      (
        'values': (
          auto: auto,
          hidden: hidden,
        ),
      )
    ),
);

@import 'bootstrap-italia/src/scss/base/utilities/api';

// Componente Modal di Bootstrap Italia
@import 'bootstrap-italia/src/scss/components/modal';
@import 'bootstrap-italia/src/scss/components/type';
@import 'bootstrap-italia/src/scss/base/helpers/visually-hidden';

// Host styles
:host {
  display: block;
}

// Nascondi modal e backdrop quando chiuso
.modal:not(.show),
.modal[aria-hidden='true'] {
  display: none !important;
}

.modal-backdrop:not(.show) {
  display: none !important;
}

// Assicura che il backdrop copra tutta la viewport
.modal-backdrop {
  position: fixed;
  z-index: $zindex-modal-backdrop;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: $modal-backdrop-bg;
  opacity: 0;
  transition: opacity 0.15s linear;

  &.show {
    opacity: $modal-backdrop-opacity;
  }

  &:not(.fade) {
    opacity: $modal-backdrop-opacity;
  }
}

// Modal container
.modal {
  position: fixed;
  z-index: $zindex-modal;
  top: 0;
  left: 0;
  display: flex;
  width: 100%;
  height: 100%;
  opacity: 0;
  outline: 0;
  overflow-x: hidden;
  overflow-y: auto;
  transition: opacity 0.15s linear;

  &.show {
    opacity: 1;
  }

  &:not(.fade) {
    opacity: 1;
  }

  &.it-dialog-scrollable {
    overflow-y: hidden;

    .modal-dialog {
      margin: 64px auto;
    }
  }
}

.modal-dialog-centered {
  min-height: unset;
  margin: auto;
}
// // Fix per il focus trap - assicura che gli elementi siano focusabili
// .modal-content {
//   &:focus {
//     outline: none;
//   }
// }

// // Migliora l'accessibilit√† del pulsante di chiusura
// .btn-close {
//   &:focus-visible {
//     outline: 2px solid var(--bs-focus-ring-color, #{$primary});
//     outline-offset: 2px;
//   }
// }
