import { Meta, Canvas, Controls, Description } from '@storybook/addon-docs/blocks';
import * as AvatarStories from './it-avatar.stories';

<Meta of={AvatarStories} />



# Avatar

<description>Rappresentazione grafica di un utente per identificare visivamente la persona online</description>

## Cosa fa


Il componente Avatar permette di rappresentare una persona, il suo stato e le sue azioni in contesti di interazione.

Può essere utile ad esempio per indicare l'autore di un testo, il proprio profilo in un'area riservata e le persone che hanno interagito con un contenuto.

[Approfondisci come e quando usare il componente Avatar](https://designers.italia.it/design-system/componenti/avatar/)
## Anteprima e attributi del componente

Modifica gli attributi nella tabella per personalizzare in tempo reale l'aspetto e il comportamento del componente. Per vedere come cambia il codice, clicca su **Show code**.

<Canvas of={AvatarStories.EsempioInterattivo} />
<Controls of={AvatarStories.EsempioInterattivo} />

## Accessibilità

Il componente Avatar implementa automaticamente le seguenti feature di accessibilità:

- Supporta attributi ARIA
- Gestione di testo alternativo per immagini
- Stato e presenza comunicati tramite attributi
- Testo per screen reader nelle varianti testuali e icona


## Avatar con immagine

Il componente avatar ridimensiona automaticamente l'immagine adattandola al formato circolare e centrandola. Ti consigliamo in ogni caso di utilizzare immagini delle dimensioni corrette.
<div class="callout callout-success"><div class="callout-inner"><div class="callout-title"><span class="text">Accessibilità delle immagini</span></div>
<p>Per ragioni di accessibilità è importante indicare all'interno dell'avatar il nome dell'utente associato allo stesso.
Nel caso di avatar con immagine, utilizza l'attributo `alt` dell'immagine inserendo in esso il nome dell'utente.</p></div></div>

<Canvas of={AvatarStories.AvatarConImmagine} />

## Avatar con testo

La versione con testo contiene le iniziali dell'utente (una sola nel caso delle dimensioni `xs` e `sm`). Oltre ai colori di default, puoi utilizzare uno sfondo a scelta fra:

- **Primario**: aggiungendo l'attributo `variant="primary"`
- **Secondario**: aggiungendo l'attributo `variant="secondary"`

In questi casi il testo sarà di colore bianco.

Un avatar con testo conterrà uno `<span class="visually-hidden">Nome Utente</span>` contenente il nome dell'utente, utile alle tecnologie assistive.

<Canvas of={AvatarStories.AvatarConTesto} />

## Avatar con icona

Per mostrare un'icona all'interno di un avatar, utilizza l'attributo `icon` valorizzato con il nome dell'icona prescelta dalla [libreria icone](https://designers.italia.it/design-system/fondamenti/iconografia/). Puoi cambiare il colore del'icona usando una delle classi disponibili.

<Canvas of={AvatarStories.AvatarConIcona} />

## Avatar con link

Per associare un avatar ad un'azione o un link, utilizza l'attributo `href` con relativo link o chiamata JavaScript.

<div class="callout callout-warning"><div class="callout-inner"><div class="callout-title"><span class="text">Tooltip non ancora implementato</span></div>
<p>La funzionalità tooltip per gli avatar con link è attualmente in fase di sviluppo.</p></div></div>

<Canvas of={AvatarStories.AvatarLink} />


## Presenza utente

L'avatar supporta indicatori di presenza dell'utente attraverso l'attributo `presence`:

- **Lo stato attivo** puoi ottenerlo aggiungendo l'attributo `presence="active"`
- **Lo stato non disponibile** puoi ottenerlo aggiungendo l'attributo `presence="busy"`
- **Lo stato invisibile** puoi ottenerlo aggiungendo l'attributo `presence="hidden"`

### Personalizzazione con Slot
L'esempio "Presenza personalizzata con slot" mostra come lo stesso componente possa essere adattato a stili o contenuti differenti tramite gli slot, per illustrare la flessibilità dell'approccio.
<div class="callout callout-success"><div class="callout-inner"><div class="callout-title"><span class="text">Accessibilità</span></div>
<p>Ricordarti di includere sempre il testo per gli screen reader con `<span class="visually-hidden">` in caso di  personalizzazione.</p></div></div>

Puoi personalizzare completamente l'indicatore di presenza usando lo **`slot="presence"`**:

```html
<it-avatar text="Nome Utente" presence="active">
	<span slot="presence" class="custom-presence-indicator">
		<it-icon name="it-check"></it-icon>
		<span class="visually-hidden">Utente online</span>
	</span>
</it-avatar>
```

```css
.custom-presence-indicator {
	position: absolute;
	bottom: 0;
	right: 0;
	/* altri stili personalizzati */
}
```

Le traduzioni dei nomi degli stati sono gestite automaticamente tramite il [sistema @italia/i18n](/docs/i18n-internazionalizzazione--documentazione).

<Canvas of={AvatarStories.ComportamentoPresenzaUtente} />

## Status utente

L'avatar supporta indicatori di stato dell'account attraverso l'attributo `status`:

- **Lo stato approvato** puoi ottenerlo aggiungendo l'attributo `status="approved"`
- **Lo stato respinto** puoi ottenerlo aggiungendo l'attributo `status="declined"`
- **Lo stato notifica** puoi ottenerlo aggiungendo l'attributo `status="notify"`

### Personalizzazione con Slot
L'esempio "Status personalizzato con slot" mostra come lo stesso componente possa essere adattato a stili o contenuti differenti tramite gli slot, per illustrare la flessibilità dell'approccio.
<div class="callout callout-success"><div class="callout-inner"><div class="callout-title"><span class="text">Accessibilità</span></div>
<p>Ricordarti di includere sempre il testo per gli screen reader con `<span class="visually-hidden">` in caso di personalizzazione.</p></div></div>

Puoi personalizzare completamente l'indicatore di stato usando lo **`slot="status"`**:

```html
<it-avatar text="Nome Utente" status="approved">
	<span slot="status" class="custom-status-indicator">
		<it-icon name="it-check-circle"></it-icon>
		<span class="visually-hidden">Account verificato</span>
	</span>
</it-avatar>
```

```css
.custom-status-indicator {
	position: absolute;
	top: -5px;
	right: -5px;
	/* altri stili personalizzati */
}
```

Le traduzioni sono gestite automaticamente tramite il [sistema @italia/i18n](/docs/i18n-internazionalizzazione--documentazione).

<Canvas of={AvatarStories.ComportamentoStatusUtente} />

## Gruppi di avatar - Liste verticali

Puoi ottenere uuna lista verticale con avatar affiancati da link e testi, aggiungendo la classe `.avatar-group` al componente.

All'interno della lista puoi usare avatar di dimensione `sm` o `md`.

<Canvas of={AvatarStories.GruppiAvatarListe} />

## Gruppi di avatar - Liste verticali con testo aggiuntivo

Puoi combinare le liste verticali con avatar che includono testo aggiuntivo tramite lo slot `extra-text`.

Questo è particolarmente utile per creare liste di utenti con informazioni aggiuntive come ruoli, date o descrizioni.

<Canvas of={AvatarStories.GruppiAvatarConTesto} />

## Gruppi di avatar - Avatar Sovrapposti

Puoi visualizzare una lista orizzontale di avatar parzialmente sovrapposti, racchiudendoli in una lista di tipo `<ul>` con classe `.avatar-group-stacked`. In questo tipo di gruppo puoi anche inserire dei Dropdown per racchiudere ulteriori elementi avatar.

Puoi utilizzare avatar di dimensione `sm` o `md` all'interno della lista.

Per mostrare ulteriori avatar in un menu a discesa, utilizza `it-avatar` con `type="dropdown"`.

L'avatar dropdown eredita automaticamente la dimensione dal gruppo e può contenere una lista di avatar con nomi nel menu.

<div class="callout callout-success"><div class="callout-inner"><div class="callout-title"><span class="text">Accessibilità del dropdown</span></div>
<p>Devi utilizzare l'attributo `it-aria-label` sul componente `it-dropdown` per fornire una descrizione completa agli screen reader. L'aria-label deve contenere sia il testo visibile che la sua spiegazione, ad esempio: `it-aria-label="Visualizza altri 4 utenti"`. In questo modo uno screen reader leggerà l'intera descrizione fornendo il contesto completo all'utente.</p></div></div>

<Canvas of={AvatarStories.AvatarSovrapposti} />
### Avatar Sovrapposti - Varianti di dimensione
Sono disponibili due varianti di dimensione per gli avatar sovrapposti all'interno del gruppo:
- **Piccola (sm)**: utilizzando avatar di dimensione `sm`
- **Media (md)**: utilizzando avatar di dimensione `md`
<Canvas of={AvatarStories.AvatarSovrappostiSM} />
<Canvas of={AvatarStories.AvatarSovrappostiMD} />

## Avatar con testo aggiuntivo

Per ottenere una versione del componente con nome esteso ed eventuale testo accessorio, utilizza lo slot `extra-text`.

Per il nome è possibile utilizzare i tag `<h3>` o `<h4>` tramite lo slot. Il testo esteso può essere contenuto in un `<p>` o in un tag `<time>` nel caso di date/orari.

<Canvas of={AvatarStories.AvatarConTestoAggiuntivo} />


## Personalizzazione degli stili

Per la personalizzazione degli stili puoi usare il selettore `::part` passando il valore `avatar`. [Vedi qui la guida dettagliata](/docs/personalizzazione-degli-stili--documentazione#selettore-part).

Altri valori disponibili per il selettore part per i vari slot esposti dal componente sono:
- `presence`: target dello slot dell'indicatore di presenza.
- `status`: target dello slot dell'indicatore di stato.
- `extra-text`: target dello slot dell'testo aggiuntivo.
