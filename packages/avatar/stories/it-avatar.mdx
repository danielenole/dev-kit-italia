import { Meta, Canvas, Controls, Description } from '@storybook/addon-docs/blocks';
import * as AvatarStories from './it-avatar.stories';

<Meta of={AvatarStories} />



# Avatar

<description>Rappresentazione grafica di un utente per identificare visivamente la persona online</description>

## Cosa fa


Il componente Avatar permette di rappresentare una persona, il suo stato e le sue azioni in contesti di interazione.

Può essere utile ad esempio per indicare l'autore di un testo, il proprio profilo in un'area riservata e le persone che hanno interagito con un contenuto.

[Approfondisci come e quando usare il componente Avatar](https://designers.italia.it/design-system/componenti/avatar/)
## Anteprima e attributi del componente

Modifica gli attributi nella tabella per personalizzare in tempo reale l'aspetto e il comportamento del componente. Per vedere come cambia il codice, clicca su **Show code**.

<Canvas of={AvatarStories.EsempioInterattivo} />
<Controls of={AvatarStories.EsempioInterattivo} />

## Accessibilità

Il componente Avatar implementa automaticamente le seguenti feature di accessibilità:

- supporta attributi ARIA;
- gestione di testo alternativo per immagini;
- stato e presenza comunicati tramite attributi;
- testo per screen reader nelle varianti testuali e icona.


## Avatar con immagine

Il componente Avatar ridimensiona automaticamente l'immagine adattandola al formato circolare e centrandola. Ti consigliamo in ogni caso di usare immagini delle dimensioni corrette.
<div class="callout callout-success"><div class="callout-inner"><div class="callout-title"><span class="text">Accessibilità delle immagini</span></div>
<p>Per ragioni di accessibilità, inserisci il nome dell'utente associato all'avatar all'interno dell'attributo `alt` dell'immagine.</p></div></div>

<Canvas of={AvatarStories.AvatarConImmagine} />

## Avatar con testo

La versione con testo contiene le iniziali dell'utente (una sola nel caso delle dimensioni `xs` e `sm`). Oltre ai colori di default, puoi utilizzare uno sfondo a scelta fra:

- **primario**, aggiungendo l'attributo `variant="primary"`;
- **secondario**, aggiungendo l'attributo `variant="secondary"`.

In questi casi il testo sarà di colore bianco.

Un avatar con testo conterrà uno `<span class="visually-hidden">Nome Utente</span>` contenente il nome dell'utente, utile alle tecnologie assistive.

<Canvas of={AvatarStories.AvatarConTesto} />

## Avatar con icona

Per mostrare un'icona all'interno di un avatar, usa l'attributo `icon` valorizzato con il nome dell'icona prescelta dalla [libreria icone](https://designers.italia.it/design-system/fondamenti/iconografia/). Puoi cambiare il colore del'icona usando una delle classi disponibili.

<Canvas of={AvatarStories.AvatarConIcona} />

## Avatar con link

Per associare un avatar a un'azione o un link, usa l'attributo `href` con relativo link o chiamata JavaScript.

<div class="callout callout-warning"><div class="callout-inner"><div class="callout-title"><span class="text">Tooltip non ancora implementato</span></div>
<p>La funzionalità tooltip per gli avatar con link è attualmente in fase di sviluppo.</p></div></div>

<Canvas of={AvatarStories.AvatarLink} />


## Presenza utente

Per aggiungere l'indicatore di presenza dell'utente a un avatar, usa l'attributo `presence`:

- **stato attivo**, con l'attributo `presence="active"`;
- **stato non disponibile**, con l'attributo `presence="busy"`;
- **stato invisibile**, con l'attributo `presence="hidden"`.

### Personalizzazione con slot
Puoi personalizzare il componente con stili o contenuti differenti tramite gli slot.
<div class="callout callout-success"><div class="callout-inner"><div class="callout-title"><span class="text">Accessibilità</span></div>
<p>Ricordarti di includere sempre il testo per gli screen reader con `<span class="visually-hidden">` in caso di  personalizzazione.</p></div></div>

Per personalizzare l'indicatore di presenza usa lo **`slot="presence"`**:

```html
<it-avatar text="Nome Utente" presence="active">
	<span slot="presence" class="custom-presence-indicator">
		<it-icon name="it-check"></it-icon>
		<span class="visually-hidden">Utente online</span>
	</span>
</it-avatar>
```

```css
.custom-presence-indicator {
	position: absolute;
	bottom: 0;
	right: 0;
	/* altri stili personalizzati */
}
```

Le traduzioni dei nomi degli stati sono gestite automaticamente tramite il [sistema @italia/i18n](/docs/i18n-internazionalizzazione--documentazione).

<Canvas of={AvatarStories.ComportamentoPresenzaUtente} />

## Status utente

Per aggiungere l'indicatore di stato dell'account a un avatar, usa l'attributo `status`:

- **stato approvato**, con l'attributo `status="approved"`;
- **stato respinto**, con l'attributo `status="declined"`;
- **stato notifica**, con l'attributo `status="notify"`.

### Personalizzazione con slot
Puoi personalizzare il componente con stili o contenuti differenti tramite gli slot.
<div class="callout callout-success"><div class="callout-inner"><div class="callout-title"><span class="text">Accessibilità</span></div>
<p>Ricordarti di includere sempre il testo per gli screen reader con `<span class="visually-hidden">` in caso di personalizzazione.</p></div></div>

Per personalizzare l'indicatore di stato usa lo **`slot="status"`**:

```html
<it-avatar text="Nome Utente" status="approved">
	<span slot="status" class="custom-status-indicator">
		<it-icon name="it-check-circle"></it-icon>
		<span class="visually-hidden">Account verificato</span>
	</span>
</it-avatar>
```

```css
.custom-status-indicator {
	position: absolute;
	top: -5px;
	right: -5px;
	/* altri stili personalizzati */
}
```

Le traduzioni sono gestite automaticamente tramite il [sistema @italia/i18n](/docs/i18n-internazionalizzazione--documentazione).

<Canvas of={AvatarStories.ComportamentoStatusUtente} />

## Gruppi di avatar - Liste verticali

Per ottenere una lista verticale con avatar affiancati da link e testi, aggiungi la classe `.avatar-group` al componente.

All'interno della lista puoi usare avatar di dimensione `sm` o `md`.

<Canvas of={AvatarStories.GruppiAvatarListe} />

## Gruppi di avatar - Liste verticali con testo aggiuntivo

Per combinare le liste verticali con avatar che includono testo aggiuntivo, usa lo slot `extra-text`.

Questa impostazione è particolarmente utile per creare liste di utenti con informazioni aggiuntive come ruoli, date o descrizioni.

<Canvas of={AvatarStories.GruppiAvatarConTesto} />

## Gruppi di avatar - Avatar Sovrapposti

Per visualizzare una lista orizzontale di avatar parzialmente sovrapposti, racchiudili in una lista di tipo `<ul>` con classe `.avatar-group-stacked`. In questo tipo di gruppo puoi anche inserire dei dropdown per racchiudere ulteriori elementi avatar.

Puoi utilizzare avatar di dimensione `sm` o `md` all'interno della lista.

Per mostrare ulteriori avatar in un menu a discesa, usa `it-avatar` con `type="dropdown"`.

L'avatar dropdown eredita automaticamente la dimensione dal gruppo e può contenere una lista di avatar con nomi nel menu.

<div class="callout callout-success"><div class="callout-inner"><div class="callout-title"><span class="text">Accessibilità del dropdown</span></div>
<p>Usa l'attributo `it-aria-label` sul componente `it-dropdown` per fornire una descrizione completa agli screen reader. L'aria-label deve contenere sia il testo visibile che la sua spiegazione, ad esempio: `it-aria-label="Visualizza altri 4 utenti"`. In questo modo uno screen reader leggerà l'intera descrizione fornendo il contesto completo all'utente.</p></div></div>

<Canvas of={AvatarStories.AvatarSovrapposti} />
### Avatar sovrapposti - varianti di dimensione
Hai a disposizione due varianti di dimensione per gli avatar sovrapposti all'interno del gruppo:
- **Piccola (sm)**: utilizzando avatar di dimensione `sm`
- **Media (md)**: utilizzando avatar di dimensione `md`
<Canvas of={AvatarStories.AvatarSovrappostiSM} />
<Canvas of={AvatarStories.AvatarSovrappostiMD} />

## Avatar con testo aggiuntivo

Per ottenere una versione del componente con nome esteso ed eventuale testo accessorio, usa lo slot `extra-text`.

Per il nome puoi usare i tag `<h3>` o `<h4>` tramite lo slot. Per il testo esteso puoi usare un `<p>` o un tag `<time>` nel caso di date/orari.

<Canvas of={AvatarStories.AvatarConTestoAggiuntivo} />


## Personalizzazione degli stili

Per personalizzare gli stili, puoi usare il selettori `::part` passando il valore `avatar`.

Altri valori disponibili per il selettore part per i vari slot esposti dal componente sono:
- `presence`, target dello slot dell'indicatore di presenza;
- `status`, target dello slot dell'indicatore di stato;
- `extra-text`, target dello slot dell'testo aggiuntivo.

[Vai alla guida sui selettori part](/docs/personalizzazione-degli-stili--documentazione#selettore-part)

