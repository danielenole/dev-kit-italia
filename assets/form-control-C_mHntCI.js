import{L as C,i as w,r as k,a as V,e as I,n as d}from"./iframe-BD5xBRNY.js";function E(s){var t,i,e="";if(typeof s=="string"||typeof s=="number")e+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(t=0;t<o;t++)s[t]&&(i=E(s[t]))&&(e&&(e+=" "),e+=i)}else for(i in s)s[i]&&(e&&(e+=" "),e+=i);return e}function O(){for(var s,t,i=0,e="",o=arguments.length;i<o;i++)(s=arguments[i])&&(t=E(s))&&(e&&(e+=" "),e+=t);return e}class F{constructor(t){this.tag=t}format(t,i){return[`[${this.tag}] ${i}`]}warn(t){console.warn(...this.format("warn",t))}error(t){console.error(...this.format("error",t))}info(t){console.info(...this.format("info",t))}}class M extends w{constructor(){super(),this.composeClass=O,this.logger=new F(this.tagName.toLowerCase())}get _ariaAttributes(){const t={};for(const i of this.getAttributeNames())i==="it-role"?t.role=this.getAttribute(i):i.startsWith("it-aria-")&&(t[i.replace(/^it-/,"")]=this.getAttribute(i));return t}generateId(t){return`${t}-${Math.random().toString(36).slice(2)}`}addFocus(t){}getActiveElement(){let t=document.activeElement;for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}get focusElement(){return this}get prefersReducedMotion(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}connectedCallback(){var i;super.connectedCallback();const t=((i=this.id)==null?void 0:i.length)>0?this.id:this.tagName.toLowerCase();this._id=this.generateId(t)}}const A=C(M);function n(s,t,i,e){var o=arguments.length,r=o<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,t,i,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(r=(o<3?a(r):o>3?a(t,i,r):a(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r}function l(s,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(s,t)}const m=new WeakMap,f=new WeakMap,p=new WeakMap,g=new WeakSet,v=new WeakMap;class S{constructor(t,i){this.submittedOnce=!1,this.handleFormData=e=>{const o=this.options.disabled(this.host),r=this.options.name(this.host),a=this.options.value(this.host),c=this.host.tagName.toLowerCase(),y=c==="it-button";if(this.host.isConnected&&!o&&!y&&typeof r=="string"&&r.length>0&&typeof a<"u")switch(c){case"it-radio":this.host.checked&&e.formData.append(r,a);break;case"it-checkbox":this.host.checked&&e.formData.getAll(r).indexOf(a)<0&&e.formData.append(r,a);break;case"it-checkbox-group":break;default:Array.isArray(a)?a.forEach(u=>{e.formData.append(r,u.toString())}):e.formData.append(r,a.toString())}},this.handleFormSubmit=e=>{var c,y;const o=this.options.disabled(this.host),r=this.options.reportValidity;this.form&&!this.form.noValidate&&((c=m.get(this.form))==null||c.forEach(u=>{this.setUserInteracted(u,!0)}));const a=r(this.host);if(this.form&&!this.form.noValidate&&!o&&!a){e.preventDefault();const u=m.get(this.form);if(u){for(const b of u)if(!((y=b.validity)!=null&&y.valid)){b.scrollIntoView({behavior:"smooth",block:"center"});break}}}this.submittedOnce=!0},this.handleFormReset=()=>{this.options.setValue(this.host,""),this.submittedOnce=!1,this.setUserInteracted(this.host,!1),v.set(this.host,[])},this.handleInteraction=e=>{const o=v.get(this.host);o.includes(e.type)||o.push(e.type),o.length===this.options.assumeInteractionOn.length&&this.setUserInteracted(this.host,!0)},this.checkFormValidity=()=>{if(this.form&&!this.form.noValidate){const e=this.form.querySelectorAll("*");for(const o of e)if(typeof o.checkValidity=="function"&&!o.checkValidity())return!1}return!0},this.reportFormValidity=()=>{if(this.form&&!this.form.noValidate){const e=this.form.querySelectorAll("*");for(const o of e)if(typeof o.reportValidity=="function"&&!o.reportValidity())return!1}return!0},(this.host=t).addController(this),this.options={form:e=>{const o=e.form;if(o){const a=e.getRootNode().querySelector(`#${o}`);if(a)return a}return e.closest("form")},name:e=>e.name,value:e=>e.value,disabled:e=>e.disabled??!1,reportValidity:e=>typeof e.reportValidity=="function"?e.reportValidity():!0,checkValidity:e=>typeof e.checkValidity=="function"?e.checkValidity():!0,setValue:(e,o)=>{e.value=o},assumeInteractionOn:["it-input"],...i}}hostConnected(){const t=this.options.form(this.host);t&&this.attachForm(t),v.set(this.host,[]),this.options.assumeInteractionOn.forEach(i=>{this.host.addEventListener(i,this.handleInteraction)})}hostDisconnected(){this.detachForm(),v.delete(this.host),this.options.assumeInteractionOn.forEach(t=>{this.host.removeEventListener(t,this.handleInteraction)})}hostUpdated(){const t=this.options.form(this.host);t||this.detachForm(),t&&this.form!==t&&(this.detachForm(),this.attachForm(t)),this.host.hasUpdated&&this.setValidity(this.host.validity.valid)}attachForm(t){t?(this.form=t,m.has(this.form)?m.get(this.form).add(this.host):m.set(this.form,new Set([this.host])),this.form.addEventListener("formdata",this.handleFormData),this.form.addEventListener("submit",this.handleFormSubmit),this.form.addEventListener("reset",this.handleFormReset),f.has(this.form)||(f.set(this.form,this.form.reportValidity),this.form.reportValidity=()=>this.reportFormValidity()),p.has(this.form)||(p.set(this.form,this.form.checkValidity),this.form.checkValidity=()=>this.checkFormValidity())):this.form=void 0}detachForm(){if(!this.form)return;const t=m.get(this.form);t&&(this.submittedOnce=!1,t.delete(this.host),t.size<=0&&(this.form.removeEventListener("formdata",this.handleFormData),this.form.removeEventListener("submit",this.handleFormSubmit),this.form.removeEventListener("reset",this.handleFormReset),f.has(this.form)&&(this.form.reportValidity=f.get(this.form),f.delete(this.form)),p.has(this.form)&&(this.form.checkValidity=p.get(this.form),p.delete(this.form)),this.form=void 0))}setUserInteracted(t,i){i?g.add(t):g.delete(t),t.requestUpdate()}doAction(t,i){if(this.form){const e=document.createElement("button");e.type=t,e.style.position="absolute",e.style.width="0",e.style.height="0",e.style.clipPath="inset(50%)",e.style.overflow="hidden",e.style.whiteSpace="nowrap",i&&(e.name=i.name,e.value=i.value,["formaction","formenctype","formmethod","formnovalidate","formtarget"].forEach(o=>{i.hasAttribute(o)&&e.setAttribute(o,i.getAttribute(o))})),this.form.append(e),e.click(),e.remove()}}getForm(){return this.form??null}reset(t){this.doAction("reset",t)}submit(t){this.doAction("submit",t)}setValidity(t){const i=this.host,e=!!g.has(i),o=!!i.required;i.toggleAttribute("data-required",o),i.toggleAttribute("data-optional",!o),i.toggleAttribute("data-invalid",!t),i.toggleAttribute("data-valid",t),i.toggleAttribute("data-user-invalid",!t&&e),i.toggleAttribute("data-user-valid",t&&e)}userInteracted(){return!!g.has(this.host)}updateValidity(){const t=this.host;this.setValidity(t.validity.valid)}emitInvalidEvent(t){const i=new CustomEvent("it-invalid",{bubbles:!1,composed:!1,cancelable:!0,detail:{}});t||i.preventDefault(),this.host.dispatchEvent(i)||t==null||t.preventDefault()}}const x={$code:"it",$name:"Italiano",$dir:"ltr",validityRequired:"Questo campo Ã¨ obbligatorio.",validityGroupRequired:"Scegli almeno un'opzione",validityPattern:"Il valore non corrisponde al formato richiesto.",validityMinlength:"Il valore deve essere lungo almeno {minlength} caratteri.",validityMaxlength:"Il valore deve essere lungo al massimo {maxlength} caratteri."};k(x);class h extends A{constructor(){super(...arguments),this.formControlController=new S(this,{assumeInteractionOn:["it-input","it-blur","it-change"]}),this._touched=!1,this.name="",this.value="",this.disabled=!1,this.form="",this.customValidation=!1,this.validationText="",this.step="any",this.minlength=-1,this.maxlength=-1,this.required=!1,this.isInGroup=!1,this.validationMessage=""}get validity(){var t;return(t=this.inputElement)==null?void 0:t.validity}getForm(){return this.formControlController.getForm()}checkValidity(){var i;return((i=this.inputElement)==null?void 0:i.checkValidity())??!0}reportValidity(){const t=this.checkValidity();return this.handleValidationMessages(),t}setCustomValidity(t){this.inputElement.setCustomValidity(t),this.validationMessage=this.inputElement.validationMessage,this.formControlController.updateValidity()}_handleReady(){requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("it-input-ready",{bubbles:!0,detail:{el:this.inputElement}}))})}_handleInput(t){this.handleValidationMessages(),this.dispatchEvent(new CustomEvent("it-input",{detail:{value:this.inputElement.value,el:this.inputElement},bubbles:!0,composed:!0}))}_handleBlur(t){this._touched=!0,this.handleValidationMessages(),this.dispatchEvent(new FocusEvent("it-blur",{bubbles:!0,composed:!0}))}_handleFocus(t){this.dispatchEvent(new FocusEvent("it-focus",{bubbles:!0,composed:!0}))}_handleClick(t){this.dispatchEvent(new MouseEvent("it-click",{bubbles:!0,composed:!0}))}handleValidationMessages(){if(!this.customValidation){const t=this.inputElement.validity,i=this.isInGroup===!0;t.valueMissing&&!i?this.setCustomValidity(this.$t("validityRequired")):t.patternMismatch?this.setCustomValidity(this.$t("validityPattern")):t.tooShort?this.setCustomValidity(this.$t("validityMinlength").replace("{minlength}",this.minlength.toString())):t.tooLong?this.setCustomValidity(this.$t("validityMaxlength").replace("{maxlength}",this.maxlength.toString())):t.typeMismatch||t.rangeUnderflow||t.rangeOverflow||t.stepMismatch||t.badInput||this.setCustomValidity("")}this.validationMessage=this.inputElement.validationMessage}_handleInvalid(t){this.formControlController.setValidity(!1),this.formControlController.emitInvalidEvent(t)}_handleChange(t){const i=t.target;let e;if(i instanceof HTMLInputElement)switch(i.type){case"checkbox":case"radio":e=i.checked;break;case"file":e=i.files;break;default:e=i.value}else i instanceof HTMLSelectElement&&i.multiple?e=Array.from(i.selectedOptions).map(o=>o.value):e=i.value;this.dispatchEvent(new CustomEvent("it-change",{detail:{value:e,el:i},bubbles:!0,composed:!0}))}updated(t){var i;(i=super.updated)==null||i.call(this,t),this.customValidation?this.setCustomValidity(this.validationText??""):this.formControlController.userInteracted()&&this.formControlController.updateValidity()}}n([V(),l("design:type",Object)],h.prototype,"_touched",void 0);n([I(".it-form__control"),l("design:type",HTMLInputElement)],h.prototype,"inputElement",void 0);n([d({type:String,reflect:!0}),l("design:type",Object)],h.prototype,"name",void 0);n([d({reflect:!0}),l("design:type",Object)],h.prototype,"value",void 0);n([d({type:Boolean,reflect:!0}),l("design:type",Object)],h.prototype,"disabled",void 0);n([d({reflect:!0,type:String}),l("design:type",Object)],h.prototype,"form",void 0);n([d({type:Boolean,reflect:!0,attribute:"custom-validation"}),l("design:type",Object)],h.prototype,"customValidation",void 0);n([d({attribute:"validity-message",reflect:!0}),l("design:type",String)],h.prototype,"validationText",void 0);n([d(),l("design:type",String)],h.prototype,"pattern",void 0);n([d(),l("design:type",Object)],h.prototype,"min",void 0);n([d(),l("design:type",Object)],h.prototype,"max",void 0);n([d(),l("design:type",Object)],h.prototype,"step",void 0);n([d({type:Number}),l("design:type",Object)],h.prototype,"minlength",void 0);n([d({type:Number}),l("design:type",Object)],h.prototype,"maxlength",void 0);n([d({type:Boolean,reflect:!0}),l("design:type",Object)],h.prototype,"required",void 0);n([d({type:Boolean}),l("design:type",Object)],h.prototype,"isInGroup",void 0);n([V(),l("design:type",Object)],h.prototype,"validationMessage",void 0);
